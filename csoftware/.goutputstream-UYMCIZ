#ifndef _CODE16GCC_H_
#define _CODE16GCC_H_
asm(".code16gcc\n");
#endif

asm("jmp $0, $main");

void exit(short code)
{
    asm volatile(
        "mov $0x00, %%ah;"
        "mov %0, %%bx;"
        "int $0x21;"
        :: "r"(code):"ax","bx"
    );
}

void loadFile(char *buffer, char *path)
{
    asm volatile(
        "mov %0, %%edx;"
        "xor %%ebp, %%ebp;"
        "mov %1, %%ebx;"
        "mov $0x05, %%ah;"
        "int $0x21;"
        :
        : "r"(path), "r"(buffer)
        :
    );
}

void main(void)
{
    loadFile(buffer, "picture.llp");
    
    exit(0);
    
    char *buffer;
}
